<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Cardápio Don Tasko</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet">
<style>
:root {
  --primary: #1a1a1a;
  --accent: #d4a574;
  --light: #f5f5f0;
  --secondary: #5a4a3a;
  --card: #2a2a2a;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Montserrat', sans-serif;
  background: var(--primary);
  color: var(--light);
  min-height: 100vh;
}

/* Header */
header {
  position: sticky;
  top: 0;
  background: var(--primary);
  border-bottom: 1px solid var(--accent);
  z-index: 100;
  box-shadow: 0 2px 10px rgba(0,0,0,0.3);
}

.header-content {
  max-width: 900px;
  margin: 0 auto;
  padding: 1.5rem 1rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.logo {
  font-family: 'Cormorant Garamond', serif;
  font-size: 2rem;
  font-weight: 600;
  color: var(--light);
  letter-spacing: 2px;
}

.nav-links {
  display: flex;
  gap: 1.5rem;
  align-items: center;
}

.nav-links a {
  color: var(--light);
  text-decoration: none;
  font-size: 0.9rem;
  letter-spacing: 1px;
  text-transform: uppercase;
  transition: color 0.3s ease;
}

.nav-links a:hover {
  color: var(--accent);
}

.lang-buttons {
  display: flex;
  gap: 0.5rem;
}

.lang-buttons button {
  background: transparent;
  border: 1px solid var(--accent);
  color: var(--accent);
  padding: 0.4rem 0.8rem;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.85rem;
  transition: all 0.3s ease;
  font-family: 'Montserrat', sans-serif;
}

.lang-buttons button:hover {
  background: var(--accent);
  color: var(--primary);
}

.lang-buttons button.active {
  background: var(--accent);
  color: var(--primary);
}

/* Main Content */
.wrapper {
  max-width: 900px;
  margin: 0 auto;
  padding: 2rem 1rem;
}

.page-title {
  font-family: 'Cormorant Garamond', serif;
  font-size: 3rem;
  font-weight: 300;
  text-align: center;
  margin-bottom: 1rem;
  letter-spacing: 3px;
}

.page-subtitle {
  text-align: center;
  color: var(--accent);
  font-size: 1rem;
  letter-spacing: 3px;
  text-transform: uppercase;
  margin-bottom: 3rem;
}

/* Loading */
.loading {
  text-align: center;
  padding: 3rem;
  color: var(--accent);
  font-size: 1.2rem;
}

/* Categories */
.category {
  margin-bottom: 3rem;
}

.category h2 {
  font-family: 'Cormorant Garamond', serif;
  font-size: 2rem;
  font-weight: 400;
  margin-bottom: 1.5rem;
  padding-bottom: 0.8rem;
  border-bottom: 2px solid var(--accent);
  cursor: pointer;
  transition: color 0.3s ease;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.category h2:hover {
  color: var(--accent);
}

.category h2::after {
  content: '▼';
  font-size: 1rem;
  transition: transform 0.3s ease;
}

.category h2.collapsed::after {
  transform: rotate(-90deg);
}

/* Items */
.items {
  display: grid;
  gap: 1.2rem;
}

.items.hidden {
  display: none;
}

.item {
  background: var(--card);
  border-radius: 12px;
  padding: 1.5rem;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  border: 1px solid transparent;
}

.item:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 20px rgba(212, 165, 116, 0.2);
  border-color: var(--accent);
}

.item-top {
  display: flex;
  justify-content: space-between;
  align-items: start;
  gap: 1rem;
  margin-bottom: 0.8rem;
}

.item-name {
  font-weight: 500;
  font-size: 1.1rem;
  letter-spacing: 0.5px;
}

.price {
  font-weight: 600;
  color: var(--accent);
  white-space: nowrap;
  font-size: 1.1rem;
}

.desc {
  font-size: 0.95rem;
  color: #bdbdbd;
  line-height: 1.6;
}

/* Mobile */
@media (max-width: 768px) {
  .header-content {
    flex-direction: column;
    gap: 1rem;
  }

  .nav-links {
    flex-direction: column;
    gap: 1rem;
  }

  .page-title {
    font-size: 2rem;
  }

  .item-top {
    flex-direction: column;
    gap: 0.5rem;
  }
}
</style>
</head>
<body>
<header>
  <div class="header-content">
    <div class="logo">Don Tasko</div>
    <div class="nav-links">
      <a href="index.html">Início</a>
      <a href="reservas.html">Reservas</a>
      <div class="lang-buttons">
        <button onclick="setLang('PT')" class="active" id="btn-PT">PT</button>
        <button onclick="setLang('EN')" id="btn-EN">EN</button>
        <button onclick="setLang('FR')" id="btn-FR">FR</button>
      </div>
    </div>
  </div>
</header>

<div class="wrapper">
  <h1 class="page-title">Nosso Menu</h1>
  <p class="page-subtitle">Sabores Autênticos</p>
  
  <div id="menu" class="loading">Carregando menu...</div>
</div>

<script>
// CONFIGURAÇÃO - SUBSTITUA ESTES VALORES
const SHEET_ID = '1xjJzNJvhLnoISLsP0qHNQ9HvqrEUZpxwbIdIjGsn3uA'; // ID da sua Google Sheet
const API_KEY = 'AIzaSyBNw0g2aBy2vyKfCCvApwrkbiLyeR7vqbI'; // Sua API Key do Google
const SHEET_NAME = 'Cardapio'; // Nome da aba da planilha

let LANG = 'PT';
let MENU_DATA = null;

function setLang(lang) {
  LANG = lang;
  
  // Atualizar botões ativos
  document.querySelectorAll('.lang-buttons button').forEach(btn => {
    btn.classList.remove('active');
  });
  document.getElementById(`btn-${lang}`).classList.add('active');
  
  // Re-renderizar menu
  if (MENU_DATA) {
    renderMenu(MENU_DATA);
  }
}

async function loadMenu() {
  try {
    const url = `https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${SHEET_NAME}?key=${API_KEY}`;
    const response = await fetch(url);
    const data = await response.json();
    
    if (!data.values) {
      throw new Error('Nenhum dado encontrado na planilha');
    }
    
    // Processar dados da planilha
    const headers = data.values[0];
    const rows = data.values.slice(1);
    
    // Debug: mostrar cabeçalhos no console
    console.log('Cabeçalhos encontrados:', headers);
    
    // Organizar por categoria
    const menu = {};
    
    rows.forEach(row => {
      const item = {};
      headers.forEach((header, index) => {
        item[header] = row[index] || '';
      });
      
      // Debug: mostrar item no console
      console.log('Item processado:', item);
      
      // Pular linhas vazias
      if (!item.Categoria || !item.Nome) return;
      
      if (!menu[item.Categoria]) {
        menu[item.Categoria] = [];
      }
      
      // Converter preço para número
      item.Preço = parseFloat(item.Preço.toString().replace(',', '.')) || 0;
      
      menu[item.Categoria].push(item);
    });
    
    MENU_DATA = menu;
    console.log('Menu completo:', menu);
    renderMenu(menu);
    
  } catch (error) {
    console.error('Erro ao carregar menu:', error);
    document.getElementById('menu').innerHTML = `
      <div style="text-align: center; color: #ff6b6b; padding: 3rem;">
        <h3>Erro ao carregar o menu</h3>
        <p>Por favor, verifique a configuração do Google Sheets.</p>
        <p style="font-size: 0.9rem; margin-top: 1rem;">Erro: ${error.message}</p>
      </div>
    `;
  }
}

function renderMenu(menu) {
  const container = document.getElementById('menu');
  container.innerHTML = '';
  container.className = '';
  
  Object.keys(menu).forEach(categoria => {
    const section = document.createElement('div');
    section.className = 'category';
    
    const h2 = document.createElement('h2');
    h2.textContent = categoria;
    section.appendChild(h2);
    
    const items = document.createElement('div');
    items.className = 'items';
    
    // Toggle categoria
    h2.onclick = () => {
      items.classList.toggle('hidden');
      h2.classList.toggle('collapsed');
    };
    
    menu[categoria].forEach(item => {
      // Pular itens inativos
      if (item.Ativo && item.Ativo.toLowerCase() === 'não') return;
      
      // Selecionar descrição baseada no idioma
      // Tentar várias variações de nomes de colunas
      let desc = '';
      
      if (LANG === 'PT') {
        desc = item.Descrição_PT || item['Descrição PT'] || item.PT || item.pt || item.Portugues || item.Português || '';
      } else if (LANG === 'EN') {
        desc = item.Descrição_EN || item['Descrição EN'] || item.EN || item.en || item.English || item.Inglês || item.Ingles || item.Descrição_PT || item['Descrição PT'] || item.PT || item.pt || '';
      } else if (LANG === 'FR') {
        desc = item.Descrição_FR || item['Descrição FR'] || item.FR || item.fr || item.French || item.Francês || item.Frances || item.Descrição_PT || item['Descrição PT'] || item.PT || item.pt || '';
      }
      
      console.log(`Item: ${item.Nome}, Idioma: ${LANG}, Descrição: ${desc}`);
      
      const div = document.createElement('div');
      div.className = 'item';
      div.innerHTML = `
        <div class="item-top">
          <div class="item-name">${item.Nome}</div>
          <div class="price">${item.Preço.toFixed(2)} €</div>
        </div>
        ${desc ? `<div class="desc">${desc}</div>` : '<div class="desc" style="color: #ff6b6b; font-style: italic;">Tradução não disponível</div>'}
      `;
      items.appendChild(div);
    });
    
    section.appendChild(items);
    container.appendChild(section);
  });
}

// Carregar menu quando a página carregar
loadMenu();
</script>
</body>
</html>

